---
product: campaign
title: Campaign Classicv7 向けのハードウェアのサイズ変更の推奨事項
description: Campaign Classicv7 向けのハードウェアのサイズ変更の推奨事項
exl-id: c47e73a0-dbd8-43f5-a363-7e6783dc7685
source-git-commit: ee296e0ce25570d1fe62238e505f978df17c1f24
workflow-type: tm+mt
source-wordcount: '2512'
ht-degree: 1%

---

# ハードウェアのサイズ決定の推奨事項{#hardware-sizing-reco}

![](../../assets/v7-only.svg)

## 概要

>[!CAUTION]
>
>この記事は、一般的なサンプルガイドとしてのみ提供されています。 Campaign プロジェクトを開始する前に、Adobe Campaignカスタマーサクセスマネージャーに相談して、デプロイメントの正確なサイズ設定を測定する必要があります。 **インフラス** トラクチャやハードウェアは、この処理が完了するまで使用しないか、デプロイしてください。

このドキュメントでは、オンプレミスのデータセンターまたは仮想化クラウド環境でのAdobe Campaign Classic v7 の導入に関する一般的な推奨事項を示します。 このタイプのデプロイメント（**ハイブリッド** または **ミッドソーシング** と呼ばれる）は、Campaign マーケティングインスタンスとマーケティングデータベースを運用管理の下に配置し、E メール、SMS または SMPP メッセージを送信します。

マーケティングインスタンスは、Adobe Campaignアーキテクチャの一部で、すべてのマーケティングアクティビティを推進し、キャンペーンから返されるすべての受信者データと分析データを保存します。 マーケティングインスタンスは、Adobe Campaignサービスを実行する一連のオンプレミスサーバーで、リレーショナルデータベースです。

>[!CAUTION]
>
>完全にホストされたAdobe Campaignインスタンス (AdobeCloud Servicesにデプロイ済み ) を使用している場合、このドキュメントの情報は適用されません。

ソフトウェアの互換性について詳しくは、[ 互換性マトリックス ](../../rn/using/compatibility-matrix.md) を参照してください。


### シナリオ

デプロイメント図とハードウェアのサイズに関する推奨事項は、次の 3 つの代表的なシナリオで提供されます。

1. [中程度のサイズ](#scenario-1)  — システム内の 500 万人のアクティブな受信者
1. [大規模](#scenario-2)  — システム内のアクティブな受信者数 2,000 万人
1. [Enterprise](#scenario-3) :5,000 万人のアクティブな受信者、トランザクションメッセージ

### 前提

このドキュメントでは、3 つのシナリオすべてについて、次のタイプの使用を想定しています。

* 大きな E メールキャンペーンは週に 2 回、アクティブな受信者の約 50%に送信されます
* ダイレクトメールは、システム内の各受信者に対して月に 1 回生成されます
* SMS メッセージは、毎月アクティブな受信者の約 10%に送信されます
* 各受信者を定義するデータベーススキーマは、1 つの追加テーブルを使用して拡張され、各受信者の約 200 バイトのデータを含みます
* Adobe Campaignインタラクションモジュールは、送信電子メールにオファーを追加するために使用されます
* E メールトラッキングデータは、Campaign システムに 90 日間保持されます

## 一般的なガイドライン

Campaign はデータベースを中心としたアプリケーションで、データベースサーバーのパフォーマンスが重要です。 ワークフローの実行、セグメント化、データのアップロードの追跡、インバウンドインタラクション、分析およびその他のアクティビティはすべて、データベースアクティビティを生成します。 一般に、これらの操作のサイズと頻度によって、データベースサーバーのサイズが決まります。

マーケティングインスタンスのアプリケーションサーバーは、ワークフローを実行し、Campaign コンソールユーザーからの要求を含む SOAP API 呼び出しに応答するのに十分な CPU とメモリを必要とします。 CPU 要件は、複雑なオファールールでアウトバウンドインタラクションを使用するワークフロー、カスタム JavaScript を実行するワークフロー、高トラフィックレベルの Web アプリケーションを使用するワークフローで重要です。

Campaign Web アプリケーションは、マーケティングインスタンスの App サーバーまたは別の Web サーバーシステムにデプロイすることもできます。 Web アプリケーションのワークロードは重要なワークフローや Campaign コンソールのユーザーと競合するので、Web アプリケーションとインバウンドインタラクションを別々のサーバーにデプロイして、コア Campaign 機能を高いパフォーマンスで確実に実行できます。

セキュリティと可用性を確保するために、Adobeでは、インターネットのトラフィックをビジネスユーザーが生成したトラフィックから分離することをお勧めします。 そのため、図には次の 2 つのサーバーグループが含まれています。Web サーバ（Web1 と Web2 に対応するインターネット）と App サーバ（App1 と App2 を処理するビジネスプロセス）。

これは、商用電子メールの送信者が機能的なオプトアウト Web ページを持つための法的要件です。 Adobeでは、フェイルオーバーシナリオで各グループサーバに冗長マシンを使用することをお勧めします。 特に、Adobe Campaignがオプトアウトページをホストする場合は当てはまります。

### リバースプロキシ

Campaign アーキテクチャは、SSL over HTTP(HTTPS) を使用してマーケティングインスタンスとAdobeCloud Messaging との間で通信を行うことで、高いセキュリティを確保します。 「非武装地帯」(DMZ) サブネットでリバースプロキシを使用して、マーケティングインスタンスサーバーとデータベースを分離し、保護することで、セキュリティ、信頼性、可用性が適用されます。

### ロードバランサー

アプリサーバーのロードバランサーは、アクティブ/パッシブ設定で設定され、プロキシで HTTPS が終了します。 Web サーバーのロードバランサーは、アクティブ/アクティブな設定で設定され、プロキシで HTTPS が終了します。

Adobeには、デプロイメント環境でAdobe Campaignサーバーに中継できる URL パスの排他的なリストが用意されています。

### アーキテクチャ

一般的なアーキテクチャは、ボリュームに関係なくほぼ同じです。 セキュリティと高可用性の要件により、最低 4 台のサーバが必要です。WebApps を使用しない場合は 2 台のサーバー。 設定の違いは、主に CPU コアやメモリなどのハードウェア構成によって異なります。

## シナリオ 1:適度なサイズの導入{#scenario-1}

![](assets/scenario-1.png)

推定ボリューム：

| チャネル | ボリューム |
| ----------------------- | ----------------- |
| アクティブな受信者 | 5 百万 |
| メール | 420 万/月 |
| ダイレクトメール | 1,000/月 |
| モバイル SMS | 100,000/月 |
| 1 日あたりのピーク E メール量 | 500 |

これらのボリュームの場合、Adobe Campaignアプリケーションサーバーシステムのペアは、Adobe Campaignクライアントユーザーとワークフローの実行に関するすべての機能を提供します。 500 万人のアクティブな受信者とこの E メールボリュームの場合、アプリケーションサーバのワークロードは CPU や I/O を集中的に消費しません。負荷の大部分はデータベースにかかっています。

Adobe Campaign Web サーバーは、セキュアゾーンに表示されます。

### Web およびアプリケーションサーバー

このシナリオでは、次の仕様で、4 台のマシンにAdobe Campaignをインストールすることをお勧めします。

**3Ghz+クアッドコア CPU、8-GB RAM、RAID 1 または 10、2 x 80-GB SSD**

これらのシステムは、Campaign コンソールユーザーを直接サポートし、キャンペーンワークフローを実行するマーケティングインスタンスアプリケーションサーバーを作成します。

DMZ の負荷分散トラフィックのリバースプロキシをAdobe Campaign Web サーバーに送信します。 プロキシマシンにAdobe Campaignソフトウェアスタックをインストールする必要はありません。リバースプロキシソフトウェアやネットワーク機器を使用できます。

購読のオプトイン/オプトアウトおよびプリファレンスセンターの機能は、Campaign またはお客様独自の Web サイトで提供できます。 この機能を Web サイトに実装する場合は、環境設定と購読情報が Campaign マーケティングデータベースに反映されるようにする必要があります。 通常は、Campaign ワークフローによって自動的にアップロードされる抽出ファイルを作成します。

アプリケーションサーバーでのディスク容量の消費は、サードパーティのサービスプロバイダー（ダイレクトメールの印刷ベンダーなど）と交換するファイルの保持期間、Web サイトからの購読や環境設定の更新、独自の CRM やマーケティングシステムからの抽出など、インポートしたフラットファイルのサイズと保持。

### データベース

データベース・サーバのハードウェア推奨事項は次のとおりです。

**3Ghz+ 4 コア CPU、16-GB RAM、RAID 1 または 10、128GB SSD 以上**

このメモリの予測値は、大規模なキャンペーンの開始時に約 500,000 人の受信者を完全にキャッシュし、さらにワークフローの実行、トラッキングデータのインポート、その他の同時アクティビティ用の RDBMS バッファ領域を想定しています。

Adobe Campaignのすべての技術データ（キャンペーン、トラッキング、作業用テーブルなど）を格納するためにデータベースに必要なディスク容量は、3 ヶ月の保持期間に基づいて約 35 GB と推定されます。 追跡データを 6 ヶ月間保持する場合、データベースのサイズは約 40 GB に増加し、12 ヶ月の保持により、データベースのサイズは約 45 GB に増加します。 受信者データは、この環境で約 5 GB を消費します。

>[!CAUTION]
>
>この予測には、追加の顧客データは含まれません。 追加の列または顧客データの表をAdobe Campaignデータベースにレプリケートする場合は、その追加のディスク容量要件を見積もる必要があります。 アップロードしたセグメント/リストの容量は、サイズ、頻度、保持期間に応じて、より多く必要となります。

また、1 日に処理される情報の量が多いため、データベース・サーバの IOPS が重要であると考えます。 例えば、ピーク日に、合計 500,000 人の受信者をターゲットにしたキャンペーンをデプロイできます。 Adobe Campaignは、各キャンペーンを実行するために、約 1,200 万件のレコード（配信ログテーブル）を含む表に、50 万件のレコードを挿入します。 キャンペーンのデプロイメント中に許容可能なパフォーマンスを提供するために、Adobeでは、このシナリオで最低 60,000 個の 4 KB のランダム読み取り/書き込み IOPS を推奨しています。


## シナリオ 2:大規模な導入{#scenario-2}

![](assets/scenario-2.png)

推定ボリューム：

| チャネル | ボリューム |
| ----------------------- | ----------------- |
| アクティブな受信者 | 二千万 |
| メール | 42 百万/月 |
| ダイレクトメール | 1,000 万/月 |
| モバイル SMS | 1,000,000/月 |
| 1 日あたりのピーク E メール量 | 5,000,000 |

### Web およびアプリケーションサーバー

このシナリオでは、Adobeは、次の仕様のAdobe Campaignを 4 台のマシン、2 台のアプリケーションサーバー、2 台の Web サーバーにインストールすることを推奨します。

**3Ghz+クアッドコア CPU、8-GB RAM、RAID 1 または 10、80-GB SSD**

アプリケーションサーバーは、Campaign コンソールユーザーとキャンペーンワークフローの実行を直接サポートします。 この機能は、高可用性を実現する 2 台の同一サーバに導入され、NAS(Network-Attached Storage) ファイル・システムを共有してフェイルオーバーを可能にします。

Web サーバーは、システム内の 1,000 万人のアクティブな受信者をサポートする Campaign Web アプリケーションをホストします。

[ シナリオ 1 を参照してください。適度なサイズの展開 ](#scenario-1)：プロキシ、環境設定センター/サブスクリプション処理、ディスク容量の使用に関するコメントを追加します。

### データベース

データベース・サーバのハードウェア推奨事項は次のとおりです。

**3Ghz+ 8 コア CPU、64-GB RAM、RAID 1 または 10、2 x 320-GB SSD または RAID 10、640 GB SSD 以上**

このメモリの予測値は、大規模なキャンペーンの開始時に約 5,000,000 人の受信者を完全にキャッシュし、さらにワークフローの実行、トラッキングデータのインポート、その他の同時アクティビティ用の RDBMS バッファ領域を想定しています。

すべてのAdobe Campaignの技術データ（キャンペーン、トラッキング、作業用テーブルなど）を格納するためにデータベースに必要なディスク容量は、3 か月の保持期間に基づいて約 280 GB であると推定されます。 追跡データを 6 ヶ月間保持する場合、データベースのサイズは約 450 GB に増加し、12 ヶ月の保持により、データベースのサイズは約 900 GB に増加します。 受信者データは、この環境で約 15 GB を消費します。

## シナリオ 3:Message Center を使用した Enterprise デプロイメント{#scenario-3}

![](assets/scenario-3.png)

推定ボリューム：

| チャネル | ボリューム |
| ----------------------- | ----------------- |
| アクティブな受信者 | 5 千万 |
| メール | 1 億 8 百万/月 |
| ダイレクトメール | 25 百万/月 |
| モバイル SMS | 2,5 百万/月 |
| トランザクションメッセージ | 2,5 百万/月 |
| 1 日あたりのピーク E メール量 | 250 万 |


5,000 万人の受信者をサポートするデプロイメントは、基本的に [ シナリオ 2](#scenario-2) に示すように同じです。Campaign Web アプリケーショントラフィックは Campaign Web サーバーにルーティングされるので、大規模なキャンペーン開始後の Web トラフィックのバーストは、Campaign ワークフローやクライアントコンソールのユーザーに影響を与えません。

このデプロイメントには、お客様独自の Web サイトやアプリケーションから実行される Message Center の呼び出しも含まれます。


### Web およびアプリケーションサーバー

このシナリオでは、Adobeは、次のように、4 台のマシンにAdobe Campaignをインストールすることをお勧めします。

* アプリケーションサーバー
   **2 台のシステム、3Ghz+クアッドコア CPU、8-GB RAM、RAID 1 または 10、80-GB SSD**

* Web サーバー
   **2 台のシステム、3Ghz+クアッドコア CPU、16-GB RAM、RAID 1 または 10、80-GB SSD**


アプリケーションサーバーは、Campaign コンソールユーザーとキャンペーンワークフローの実行を直接サポートします。 この機能は、高可用性を実現する 2 台の同一サーバに導入され、NAS(Network-Attached Storage) ファイル・システムを共有してフェイルオーバーを可能にします。

Web サーバーは、システム内の 1,000 万人のアクティブな受信者をサポートする Campaign Web アプリケーションをホストします。

[ シナリオ 1 を参照してください。適度なサイズの展開 ](#scenario-1)：プロキシ、環境設定センター/サブスクリプション処理、ディスク容量の使用に関するコメントを追加します。

### データベース

データベース・サーバのハードウェア推奨事項は次のとおりです。

**3Ghz+ 8 コア CPU、96-GB RAM、RAID 1 または 10、1.5TB SSD 以上**

このメモリの予測値は、大規模なキャンペーン開始に対して約 12,500,000 人の受信者を完全にキャッシュすることと、ワークフローの実行、トラッキングデータのインポート、その他の同時アクティビティに対する RDBMS バッファ領域を想定しています。

すべてのAdobe Campaignの技術データ（キャンペーン、トラッキング、作業用テーブルなど）を格納するためにデータベースに必要なディスク容量は、3 ヶ月の保持期間に基づいて約 700 GB と推定されます。 追跡データを 6 か月間保持する場合、データベースのサイズは約 1.2 TB に増加し、12 か月の保持では、データベースのサイズが約 2 TB に増加します。 受信者データは、この環境で約 50 GB を消費します。

## 仮定の変更に関するガイドライン

これらのシナリオに対して行われた前提は、ハードウェアの推奨事項と導入アーキテクチャに大きな影響を与えます。 この項では、様々な前提に関するガイドラインを説明します。 要件を満たすための具体的な推奨事項については、Adobe Campaignコンサルティングチームにお問い合わせください。

* **RecipientsActive 受信者の数**
は、ストレージ領域とデータベースバッファ領域の両方を必要とするので、通常、より多くの受信者は、データベースサーバー上でより多くのメモリと CPU 容量を必要とします。受信者自身にとってストレージの増加は比較的小さいですが、E メールキャンペーン用に保持されるイベントトラッキングデータにとって重要な場合があります。

* **電子メールキャ**
ンペーンのサイズキャンペーンの開始頻度は、データベースサーバーの CPU 要件に影響を与えます。ダイレクトメール、インバウンドインタラクション、その他のワークフローと組み合わせて、E メールキャンペーンのセグメント化操作をおこなうと、データベースサーバーに大きな負荷がかかります。

* **ダイレクトメー**
ルの頻度ダイレクトメールの頻度は、データベースサーバーの CPU 要件に影響を与える可能性があります。キャンペーンの起動や他のワークフローと組み合わせて、ダイレクトメールのセグメント化操作を行うと、データベースサーバーに大きな負荷がかかります。

* **SMS メッセージ**
のボリューム電子メールキャンペーンのサイズと同様、SMS メッセージのボリュームは、オンプレミスにある Campaign サーバーに大きな負荷を置きません。読み込みは、主にクラウド上のAdobeCloud Messaging サーバーでおこなわれます。E メールやダイレクトメールなどの SMS キャンペーンのセグメント化は、マーケティングデータベースに大きな負荷をかける可能性があります。 したがって、SMS キャンペーンの開始頻度とセグメント化の複雑さは、SMS メッセージの量よりも重要です。

* **データベーススキ**
ーマの複雑さ各アクティブな受信者のデータ量には、ストレージ領域とデータベースバッファ領域の両方が必要です。したがって、通常、より多くの受信者は、データベースサーバー上でより多くのメモリと CPU を必要とします。複雑なスキーマでは、セグメント化用に結合するテーブルも多くなるので、セグメント化操作の実行時間が長くなり、データが複数のテーブルに分散される場合に、より多くのデータベース CPU とメモリが必要になります。

   データベース・サーバ・メモリは、データベース・バッファ・プールが、すべての受信者データと、ワークフローを実行する一時テーブル、その他のデータベース操作の余白を含む十分な大きさになることを確認して推定します。

* **バッチモードで**
のインタラクションのアウトバウンドインタラクションの使用ルールは、計算の複雑さをすべてデータベースに引き継ぐワークフローで評価されます。データベースでの主な労力要因は、1 回のエンジン呼び出し中に計算された適格なオファーの合計数です（N 個の最適なオファーを維持する前の、受信者あたりの平均オファー数 X ターゲットサイズ）。 データベース・サーバの CPU 速度は、パフォーマンスの最初の要因です。

* **インバウンドインタラクションまたは SOAP API UsageInbound インタラクションルールとオファー**
は、マーケティングデータベースで評価され、特に CPU などの大量のデータベースサーバーリソースが必要となります。インバウンドインタラクションまたは SOAP API を大量に使用する場合は、Campaign ワークフローの実行と作業負荷を分離するために、別々の Web サーバーが必要です。

* **データ保持期間の追**
跡 90 日を超えて追跡データの保持期間を増やすと、データベースのストレージが増え、新しい追跡データが大きなテーブルに挿入されるので、システムの速度が低下する可能性があります。トラッキングデータは、90 日後のキャンペーンのセグメント化には役に立たないので、保持期間を短くすることをお勧めします。

   受信者のマーケティングエクスペリエンスの長期的な分析が必要な場合は、トラッキングデータをAdobe Analyticsまたは他の分析システムに移動する必要があります。

## 仮想化

すべての Campaign サーバは仮想化に適しています。 適切な可用性とパフォーマンスを確保するために、いくつかの問題に対処する必要があります。

* **フェイルオーバ**
ー ConfigurationClustered サーバ（負荷分散プロキシの下の冗長アプリケーションサーバなど）は、ハードウェア障害が発生した場合に両方の VM が停止しないように、別のハードウェアにデプロイする必要があります。

* **I/O 構成推奨 RAID 構**
成は、データベースのセキュリティを確保するために維持する必要があります。これは、ストレージ・デバイスの損失によってデータが失われないようにするためです。

* **I/O パフォーマン**
スデータベースストレージの推奨 IOPS 評価を考慮する必要があります。Amazon EC2 などのクラウドサービスは、必要なパフォーマンスを提供しない場合があるので、慎重に評価する必要があります。 例えば、Amazon EC2 プロビジョニングされた SSD ボリュームの評価は、現在、それぞれ 20,000 IOPS です。 詳しくは、[Amazonのドキュメント ](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSVolumeTypes.html) を参照してください。4 ボリュームの RAID 構成は 80,000 IOPS と評価されますが、これでは十分ではない可能性があります。

Adobeでは、Adobe Campaignの仮想化導入に対してパフォーマンステストを実施してから、システムを本番環境に移行することをお勧めします。

## 関連トピック

* [キャンペーン監視プロセス](../../production/using/monitoring-processes.md)
* [Campaign の一般的なアーキテクチャ](../../installation/using/general-architecture.md)
* [パフォーマンスとスループットの問題](../../production/using/performance-and-throughput-issues.md)
* [セキュリティとプライバシーのチェックリスト](../../installation/using/get-started-security-privacy.md)
