---
title: Adobe Campaignクラシックを使用したトランザクションメッセージへの添付ファイルの追加
description: Adobe Campaignクラシックを使用して、個々の添付ファイルやパーソナライズされた添付ファイルを含むトランザクション電子メールを送信する方法を学びます。
page-status-flag: never-activated
uuid: 4452d839-318a-49d8-8abb-4ba04c803e9f
contentOwner: sauviat
products: SG_CAMPAIGN/CLASSIC
audience: message-center
content-type: reference
topic-tags: use-case
discoiquuid: 7b8ab9d6-e47e-46d8-99df-da793486654c
index: y
internal: n
snippet: y
translation-type: tm+mt
source-git-commit: 24a50fcaad4d9081e5504652eb5b73aa7db1e65f
workflow-type: tm+mt
source-wordcount: '563'
ht-degree: 41%

---


# 使用例： 添付ファイル付きトランザクション電子メールの送信{#transactional-email-with-attachments}

この使用例の目的は、アウトバウンドの送信時に E メール添付ファイルを追加することです。

## 主な手順 {#key-steps}

このシナリオでは、個々の添付ファイルやパーソナライズされた添付ファイルを含むトランザクション電子メールの送信方法を学習します。 添付ファイルは、トランザクションメッセージングサーバーに事前にアップロードされません。 その代わりに、その場で生成されます。

顧客のインタラクションや詳細を記録する場合は、プロセスの最後にこの情報を顧客に送り返すことが必要になる場合があります。例えば、この情報を含めた PDF ファイルを E メールに添付したりします。

このシナリオの主な手順は次のとおりです。

1. 顧客が Web サイトにアクセスし、購入する商品を検索します。
1. 顧客が目的の商品を選択し、いくつかのオプションをカスタマイズします。
1. 顧客がトランザクションを完了します。
1. その顧客にトランザクションの内容を確認する E メールが送信されます。PII（個人を特定できる情報）を電子メールで送信することはお勧めしないので、安全なPDFが生成され、電子メールに添付されます。
1. 顧客は、関連データを含む電子メールと添付ファイルを受信します。

このシナリオでは、添付ファイルは事前に作成されていませんが、送信電子メールにその場で追加されます。このオファーには、次の利点があります。

* これにより、添付ファイルのコンテンツをパーソナライズできます。
* 添付ファイルがトランザクションに関連付けられている場合（前述の例のシナリオを参照）、顧客プロセス中に生成される動的データが添付ファイルに含まれる場合があります。
* PDFファイルを添付すると、PDFファイルを暗号化してHTTPS経由で送信できるので、セキュリティが最適化されます。

## 推奨事項 {#important-notes}

このシナリオを実装する前に、次のガイドラインをよくお読みください。

* ファイルやデータの保存、書き出し、アップロードには、トランザクションメッセージングインスタンスを使用しないでください。 イベントデータおよび関連情報にのみ使用できます。 トランザクションメッセージインスタンスをファイルストレージシステムと考えないでください。
* アドビ以外のトランザクションメッセージインスタンスまたはサーバーに直接アクセスする方法は存在しないので、これらのサーバー上にあるファイルをプッシュする標準的な方法はありません（FTP でアクセスすることもできません）。
* 契約上、トランザクションメッセージングインスタンスのディスク領域を使用して、添付ファイルを含めず、どのような種類のファイルでも保存するのは正しくありません。
* 別のオンラインディスクシステムでこれらのファイルをホストする必要があります。このシステムへのFTPアクセス権が必要で、ファイルの書き込みと削除が可能である必要があります。

## 実装 {#implementation}

次の図に、このシナリオを実装する際の様々な手順を示します。

![](assets/message-center-uc1.png)

電子メール添付ファイルをその場でトランザクションメッセージに追加するには、次の手順に従います。

1. 添付ファイルを設計することによる開始。 詳しくは、[この節](../../delivery/using/attaching-files.md#attach-a-personalized-file)を参照してください。

   こうすることで、実行インスタンスでホストされていなくても、ファイルを E メールに添付できます。

1. SOAP メッセージトリガーを介して E メールを送信できます。SOAP 呼び出しには、URL パラメーター（attachmentURL）があります。

   SOAP リクエストについて詳しくは、[イベントの説明](../../message-center/using/event-description.md)を参照してください。

1. When designing your email, click **[!UICONTROL Attachment]**.

1. **[!UICONTROL 添付ファイルの定義]**&#x200B;画面で、SOAP 添付ファイルパラメーターを入力します。

   ```
   <%= rtEvent.ctx.attachementUrl %>
   ```

1. メッセージが処理されると、リモートの場所（サードパーティサーバー）からファイルが取得され、個々のメッセージに添付されます。

   このパラメーターには変数を使用できるので、目的のファイルの完全な形のリモート URL 変数を指定し、SOAP 呼び出しを介して送信できます。

   ![](assets/message-center-uc2.png)
