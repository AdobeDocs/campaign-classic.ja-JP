---
title: パーソナライゼーションフィールド
seo-title: パーソナライゼーションフィールド
description: パーソナライゼーションフィールド
seo-description: null
page-status-flag: never-activated
uuid: 3a94a50e-259e-40c3-ae67-8a2c42e9fad7
contentOwner: sauviat
products: SG_CAMPAIGN/CLASSIC
audience: delivery
content-type: reference
topic-tags: personalizing-deliveries
discoiquuid: 27c8e443-ee6b-4d58-bc2d-81cf8391c5de
index: y
internal: n
snippet: y
translation-type: tm+mt
source-git-commit: e9e9b1352706e15a0d0c6ff8921e430524a44b13
workflow-type: tm+mt
source-wordcount: '889'
ht-degree: 94%

---


# パーソナライゼーションフィールド{#personalization-fields}

パーソナライゼーションフィールドは、配信されるメッセージのコンテンツをパーソナライズする第 1 レベルの手段として使用されます。メインコンテンツに挿入したフィールドが、選択したデータソースからのデータが配置される場所を示します。

例えば、**&lt;%= recipient.LastName %>** という構文のパーソナライゼーションフィールドは、データベース（受信者テーブル）に受信者の名前を挿入するための指示です。

>[!NOTE]
>
>パーソナライゼーションフィールドのコンテンツは、1024 文字以内である必要があります。

## データソース {#data-sources}

パーソナライゼーションフィールドに入る値のデータソースには次の 2 種類があり、どちらが使用されるかは選択した配信モードによります。

* Adobe Campaign データベース：多くの場合はこちらが該当します。例えば「受信者のパーソナライゼーションフィールド」は、受信者テーブルに定義されているすべてのフィールドです。標準フィールド（通常の場合、姓、名、住所、市区町村、生年月日など）やユーザー定義フィールドが含まれます。
* 外部ファイル：外部ファイルのデータを使用した配信の際に、入力データ用ファイルの列に定義されている全フィールドが該当します。

>[!NOTE]
>
>Adobe Campaign のパーソナライゼーションタグは、常に **&lt;%=table.field%>** の形を取ります。

## パーソナライゼーションフィールドの挿入 {#inserting-a-personalization-field}

パーソナライゼーションフィールドを挿入するには、目的に応じたヘッダー、件名、メッセージ本文の編集フィールドからアクセスできるドロップダウンアイコンをクリックします。

![](assets/s_ncs_user_add_custom_field.png)

挿入は、データソース（受信者フィールドまたはファイルフィールド）を選択した後にコマンドを挿入する形でおこなわれます。それらのコマンドが Adobe Campaign によって解釈され、各受信者に関するフィールドの値に置換されます。実際に置換された結果は「**[!UICONTROL プレビュー]**」タブで確認できます。

## パーソナライゼーションフィールドの例 {#personalization-fields-example}

E メールを作成するとします。まず受信者の名前を挿入し、続いて、メッセージ本文にプロファイルの作成日を挿入することにします。手順は次のとおりです。

1. 新しい配信を作成するか、E メールタイプの既存の配信を開きます。
1. 配信ウィザードで、「**[!UICONTROL 件名]**」をクリックし、メッセージの件名の編集や件名の入力をおこないます。
1. 「**[!UICONTROL Special offer for]**」と入力し、ツールバーのボタンを使用してパーソナライゼーションフィールドを挿入します。**[!UICONTROL 受信者／タイトル]**&#x200B;を選択します。

   ![](assets/s_ncs_user_insert_custom_field.png)

1. 受信者の名前を挿入する操作を繰り返します。各パーソナライゼーションフィールド間にはスペースを挿入します。
1. 「**[!UICONTROL OK]**」をクリックして検証します。
1. メッセージ本文にパーソナライゼーションを挿入します。そのためには、メッセージコンテンツをクリックし、フィールド挿入ボタンをクリックします。
1. **[!UICONTROL 受信者／その他]**&#x200B;を選択します。

   ![](assets/s_ncs_user_insert_custom_field_b.png)

1. 表示する情報を含んだフィールドを選択し、「**[!UICONTROL OK]**」をクリックします。

   ![](assets/s_ncs_user_insert_custom_field_c.png)

1. 「**[!UICONTROL プレビュー]**」タブをクリックすると、パーソナライゼーションの結果が表示されます。受信者に応じたメッセージを確認するには、受信者を選択する必要があります。

   ![](assets/s_ncs_user_insert_custom_field_d.png)

   >[!NOTE]
   >
   >この配信がワークフローの構成要素である場合は、一時的なワークフローテーブルから取得したデータを使用できます。このデータは、**[!UICONTROL ターゲット式]**&#x200B;メニュー内にグループ化されています。詳しくは、[この節](../../workflow/using/data-life-cycle.md#target-data)を参照してください。

## パーソナライゼーションの最適化 {#optimizing-personalization}

配信プロパティの「**[!UICONTROL 分析]**」タブで使用できる専用のオプション、「]**ワークフローを使用してパーソナライゼーションデータを準備**[!UICONTROL 」を使用して、パーソナライゼーションを最適化できます。配信の分析について詳しくは、 [この節を参照してください](../../delivery/using/steps-validating-the-delivery.md#analyzing-the-delivery)。

このオプションを選択すると、配信の分析時に、一時テーブル内のターゲットにリンクするすべてのデータ（FDA にリンクするテーブルのデータなど）を保存するワークフローが自動的に作成、実行されます。

多数のデータが処理される場合、特にパーソナライズデータが外部テーブルからFDAを介して送られる場合は、このオプションをオンにすると、配信分析のパフォーマンスを大幅に向上できます。 For more on this, see [Accessing an external database (FDA)](../../platform/using/additional-options.md#optimizing-email-personalization-with-external-data).

例えば、コンテンツに多数のパーソナライゼーションフィールドやパーソナライゼーションブロックが使用されているメッセージを多数の受信者に配信するときにパフォーマンスの問題が発生した場合、このオプションを使用すると、パーソナライゼーションの処理が高速化され、その結果メッセージの配信が高速化されます。

このオプションを使用するには、以下の手順に従います。

1. キャンペーンを作成します。詳しくは、[この節](../../campaign/using/setting-up-marketing-campaigns.md#creating-a-campaign)を参照してください。
1. キャンペーンの「**[!UICONTROL ターゲティングとワークフロー]**」タブで、ワークフローに&#x200B;**クエリ**&#x200B;アクティビティを追加します。このアクティビティの使用について詳しくは、[この節](../../workflow/using/query.md)を参照してください。
1. **[!UICONTROL E メール配信]**&#x200B;アクティビティをワークフローに追加して開きます。このアクティビティの使用について詳しくは、[この節](../../workflow/using/delivery.md)を参照してください。
1. **[!UICONTROL 配信プロパティ]**&#x200B;の「**[!UICONTROL 分析]**」タブで、「**[!UICONTROL ワークフローを使用してパーソナライゼーションデータを準備]**」オプションを選択します。

   ![](assets/perso_optimization.png)

1. 配信を設定し、ワークフローを開始して分析を開始します。

分析が完了すると、パーソナライゼーションデータは、分析中にオンザフライで作成された一時的なテクニカルワークフローを通じて一時テーブルに格納されます。

このワークフローは、Adobe Campaign インターフェイスには表示されません。これは、パーソナライゼーションデータを迅速に格納および処理するための単なる技術的な手段です。

分析が完了したら、ワークフローの&#x200B;**[!UICONTROL プロパティ]**&#x200B;に移動し、「**[!UICONTROL 変数]**」タブを選択します。一時テーブルの名前が表示されます。この名前を使用して SQL 呼び出しをおこなって、一時テーブルに含まれている ID を表示することができます。

![](assets/perso_optimization_temp_table.png)

## パーソナライゼーションフェーズのタイムアウト {#timing-out-personalization}

配信の保護を強化するために、パーソナライゼーションフェーズのタイムアウト期間を設定できます。

**[!UICONTROL 配信プロパティ]**&#x200B;の「**[!UICONTROL 配信]**」タブで、「**[!UICONTROL 最長パーソナライゼーション実行時間]**」オプションの最大値（秒）を選択します。

プレビュー中または送信中に、パーソナライゼーションフェーズがこのフィールドで設定した最大時間を超えると、プロセスはエラーメッセージと共に中止され、配信は失敗します。

![](assets/perso_time-out.png)

デフォルト値は 5 秒です。

このオプションを 0 に設定した場合、パーソナライゼーションフェーズに時間制限はなくなります。