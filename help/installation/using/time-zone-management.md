---
product: campaign
title: タイムゾーン管理
description: タイムゾーン管理
feature: Installation, Instance Settings
badge-v7-only: label="v7" type="Informative" tooltip="Campaign Classic v7 にのみ適用されます"
badge-v7-prem: label="オンプレミスおよびハイブリッド" type="Caution" url="https://experienceleague.adobe.com/docs/campaign-classic/using/installing-campaign-classic/architecture-and-hosting-models/hosting-models-lp/hosting-models.html?lang=ja" tooltip="オンプレミスデプロイメントとハイブリッドデプロイメントにのみ適用されます"
audience: installation
content-type: reference
topic-tags: additional-configurations
exl-id: e5ed96cc-3fc7-4af4-a29e-5a4c81f4fe39
source-git-commit: a94c361c5bdd9d61ae9232224af910a78245a889
workflow-type: tm+mt
source-wordcount: '997'
ht-degree: 3%

---

# タイムゾーン管理{#time-zone-management}



## 動作の原則 {#operating-principle}

Adobe Campaignでは、日付をタイムゾーンの関数として表すことができます。これにより、国際ユーザーは世界中の様々なタイムゾーンで作業できるようになります。 同じインスタンスを使用する各国で、キャンペーン、トラッキング、アーカイブなどの実行を管理できます。 現地時間に応じて異なります。

Adobe Campaignプラットフォームを国際規模で使用できるようにするには、システムで使用されるすべての日付がタイムゾーンにリンクできる必要があります。 タイムゾーンがわかっている日付は、その他のタイムゾーンにも、タイムゾーンに関係なくインポートできます。

Adobe Campaignでは、日付/時刻を UTC（協定世界時）形式で保存できます。 データが公開されると、オペレーターのローカル日時に変換されます。 変換は、データベースが UTC で設定されている場合に自動的に実行されます ( [設定](#configuration)) をクリックします。 データベースが UTC で設定されていない場合、プラットフォームの日付のタイムゾーンに関する情報は、オプションに保存されます。

タイムゾーン管理に関する主なプラットフォーム機能は、データのインポート/エクスポートおよびオペレーターとワークフロー管理です。 The **継承概念** は、インポート/エクスポートまたはワークフローで使用できます。 デフォルトでは、データベースサーバーのタイムゾーンに対して設定されていますが、ワークフローや単一のアクティビティに対して新しいタイムゾーンを再定義できます。

**演算子** 次の時間帯にタイムゾーンを変更できます： **配信設定** とでは、配信を実行する特定のタイムゾーンを指定できます。

>[!IMPORTANT]
>
>データベースが複数のタイムゾーンを管理していない場合、すべてのデータのフィルタリング操作に対して、SQL クエリはデータベースサーバーのタイムゾーンで実行する必要があります。

各Adobe Campaignオペレーターはタイムゾーンにリンクされています。この情報は、オペレーターのプロファイルで設定されます。 詳しくは、 [このドキュメント](../../platform/using/access-management.md).

Adobe Campaignプラットフォームでタイムゾーン管理が必要ない場合は、特定のタイムゾーンがリンクされた状態で、ストレージモードをローカル形式に保つことができます。

## 推奨事項 {#recommendations}

タイムゾーンは、いくつかの現実を組み合わせたものです。式は、UTC 日付との一定のタイムラグ、または年 2 回（夏時間）に時間が変わる地域の時間を表す場合があります。

例えば、postgreSQL では、 **タイムゾーンを&#39;ヨーロッパ/パリ&#39;に設定する；** コマンドは、夏と冬の時間を考慮します。日付は、年の時刻に応じて UTC+1 または UTC+2 で表されます。

ただし、 **タイムゾーンを 0200 に設定する。** コマンドを使用する場合、タイムラグは常に UTC+2 になります。

## 設定 {#configuration}

日付と時刻のストレージモードは、データベースの作成時に選択します ( [新しいインスタンスの作成](#creating-a-new-instance)) をクリックします。 移行する場合、日付にリンクされた時間は現地の日付と時間に変換されます ( [移行](#migration)) をクリックします。

技術的な観点から、保存方法は 2 つあります **日付+時刻** データベースに情報を入力します。

1. TIMESTAMP WITH TIMEZONE 形式：データベースエンジンは日付を UTC で保存します。 開かれた各セッションにはタイムゾーンが設定され、それに従って日付が変換されます。
1. ローカル形式+ローカルタイムゾーン：すべての日付はローカル形式（タイムラグ管理は使用しない）で保存され、1 つのタイムゾーンが割り当てられます。 タイムゾーンは、 **WdbcTimeZone** オプションを指定し、Adobe Campaignインスタンスの **[!UICONTROL 管理/プラットフォーム/オプション]** ツリーのメニュー。

>[!IMPORTANT]
>
>この変更により、データの一貫性と同期の問題が発生する可能性があることに注意してください。

### 新しいインスタンスの作成 {#creating-a-new-instance}

複数の国際ユーザーが同じインスタンスで作業するには、国間のタイムラグを管理するインスタンスを作成する際に、タイムゾーンを設定する必要があります。 インスタンスの作成時に、 **[!UICONTROL タイムゾーン]** データベース設定ステージの「 」セクション。

次を確認します。 **[!UICONTROL UTC データベース（タイムゾーンを含む日付フィールド）]** 日付と時刻を含むすべてのデータを UTC 形式（SQL フィールドおよび XML フィールド）で格納するオプション。

![](assets/install_wz_select_utc_option.png)

>[!IMPORTANT]
>
>を使用している場合、 **Oracle**&#x200B;に設定する場合、Oracleクライアントレイヤーのタイムゾーンファイル (.dat) は、サーバーにインストールされたタイムゾーンファイルと互換性がある必要があります。

データベースが UTC でない場合は、ドロップダウンリストで提供されたタイムゾーンの 1 つを選択できます。 また、サーバーのタイムゾーンを使用したり、「UTC（協定世界時）」オプションを選択したりすることもできます。

![](assets/install_wz_unselect_utc_option.png)

次の場合に **[!UICONTROL UTC データベース（タイムゾーンを含む日付フィールド）]** オプションが選択されている場合、SQL フィールドは TIMESTAMP WITH TIMEZONE 形式で保存されます。

それ以外の場合は、ローカル形式で保存され、データベースに適用するタイムゾーンを選択する必要があります。

### 移行 {#migration}

以前のバージョン（タイムゾーン管理を使用しない）に移行する場合は、データベースで日付ストレージモードを定義する必要があります。

Adobe Campaignデータベースにアクセスする外部ツールとの互換性を保証するには、 **日付+時刻** タイプの SQL フィールドは、デフォルトではローカルフォーマットで保存されます。

日付を含む XML フィールドが UTC で保存されるようになりました。 読み込み時に、UTC 形式でないフィールドは、サーバーのタイムゾーンを使用して自動的に変換されます。 つまり、すべての XML フィールドは順次 UTC 形式に変換されます。

既存のインスタンスを使用するには、 **WdbcTimeZone** 」オプションを選択し、インスタンスのタイムゾーンを入力します。

>[!IMPORTANT]
>
>「 WdbcTimeZone 」オプションに正しい値が設定されていることを確認してください。後で変更を行うと、不整合が生じる場合があります。

可能な値の例：

* ヨーロッパ/パリ
* ヨーロッパ / ロンドン,
* アメリカ/ニューヨーク等

  これらの値は tz(Olson) データベースから取得されます。 詳しくは、 [https://en.wikipedia.org/wiki/List_of_tz_database_time_zones](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones).

## Oracleデータベースとサーバータイムゾーン

メインデータベースの場合、Campaign はサーバータイムゾーンを使用して、データベース接続のセッションタイムゾーンを設定します。 「WdbcTimeZone」オプションは影響を受けません。 したがって、サーバーのタイムゾーンは、Campaign で使用されるメインデータベースのタイムゾーンと一致する必要があります。 サーバータイムゾーンを変更できない場合、customer.sh の TZ 環境変数を設定することで、Campaign で使用されるタイムゾーンを上書きできます。