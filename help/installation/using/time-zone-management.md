---
product: campaign
title: タイムゾーン管理
description: タイムゾーン管理
feature: Installation, Instance Settings
badge-v7-prem: label="オンプレミス／ハイブリッドのみ" type="Caution" url="https://experienceleague.adobe.com/docs/campaign-classic/using/installing-campaign-classic/architecture-and-hosting-models/hosting-models-lp/hosting-models.html?lang=ja" tooltip="オンプレミスデプロイメントとハイブリッドデプロイメントにのみ適用されます"
audience: installation
content-type: reference
topic-tags: additional-configurations
exl-id: e5ed96cc-3fc7-4af4-a29e-5a4c81f4fe39
source-git-commit: 0ed70b3c57714ad6c3926181334f57ed3b409d98
workflow-type: tm+mt
source-wordcount: '970'
ht-degree: 2%

---

# タイムゾーン管理{#time-zone-management}



## 動作の原則 {#operating-principle}

Adobe Campaignでは、日付をタイムゾーンの関数として表すことができます。これにより、世界中のユーザーが様々なタイムゾーンで作業できるようになります。 同じインスタンスを使用する国ごとに、キャンペーン、トラッキング、アーカイブなどの実行を管理できます。 現地時間によって異なります。

Adobe Campaignを国際的な規模で使用できるようにするには、システムで使用されるすべての日付をタイムゾーンにリンクできる必要があります。 タイムゾーンがわかっている日付は、他のタイムゾーンやタイムゾーンに関係なくインポートできます。

Adobe Campaignでは、日付や時刻を UTC （協定世界時）形式で保存できます。 データが公開されると、オペレーターのローカルの日時に変換されます。 変換は、データベースが UTC で設定されると自動的に実行されます（[ 設定 ](#configuration) を参照）。 データベースが UTC に設定されていない場合、プラットフォーム内の日付のタイムゾーンに関する情報は、オプションに保存されます。

タイムゾーン管理に関する主なプラットフォーム機能は、データのインポート/エクスポートおよびオペレーターとワークフロー管理です。 **継承の概念** は、インポート/エクスポートまたはワークフローで使用できます。 デフォルトでは、これらはデータベースサーバーのタイムゾーンに対して設定されますが、ワークフローの新しいタイムゾーンや、1 つのアクティビティの新しいタイムゾーンも再定義できます。

**オペレーター** は、**配信の設定** 中にタイムゾーンを変更したり、配信が実行される特定のタイムゾーンを指定したりできます。

>[!IMPORTANT]
>
>データベースが複数のタイムゾーンを管理していない場合、すべてのデータフィルタリング操作で、データベースサーバーのタイムゾーンで SQL クエリを実行する必要があります。

各Adobe Campaign演算子はタイムゾーンにリンクされています。この情報は、オペレーターのプロファイルで設定されます。 詳しくは、[ このドキュメント ](../../platform/using/access-management.md) を参照してください。

Adobe Campaign プラットフォームでタイムゾーンの管理が必要ない場合は、ストレージモードをローカル形式に保ち、リンクされたタイムゾーンを指定できます。

## 推奨事項 {#recommendations}

タイムゾーンは、いくつかの現実を組み合わせています。式は、UTC 日付を使用した一定の時間差を表す場合や、年に 2 回（夏時間）変更される可能性のある地域の時間を表す場合があります。

例えば、postgreSQL では、**SET TIME ZONE &#39;Europe/Paris&#39;;** コマンドは夏時間と冬時間を考慮に入れます。日付は、年の時刻に応じて UTC+1 または UTC+2 で表されます。

ただし、**SET TIME ZONE 0200;** コマンドを使用する場合、タイムラグは常に UTC+2 になります。

## 設定 {#configuration}

日時のストレージモードは、データベースの作成時に選択します（[ 新しいインスタンスの作成 ](#creating-a-new-instance) を参照）。 移行の場合、日付にリンクされている時間は、地域の日付と時間に変換されます（[ 移行 ](#migration) を参照）。

技術的には、データベースに **日付+時刻** タイプの情報を保存する方法は 2 つあります。

1. TIMESTAMP WITH TIMEZONE format: データベースエンジンは日付を UTC で保存します。 開かれる各セッションにはタイムゾーンがあり、日付はそれに従って変換されます。
1. ローカル形式+ ローカルタイムゾーン：すべての日付がローカル形式で保存され（タイムラグ管理なし）、1 つのタイムゾーンが割り当てられます。 タイムゾーンはAdobe Campaign インスタンスの「**WdbcTimeZone**」オプションに格納され、ツリーの **[!UICONTROL 管理/プラットフォーム/オプション]** メニューで変更できます。

>[!IMPORTANT]
>
>この変更により、データの一貫性と同期に関する問題が生じる可能性があることに注意してください。

### 新しいインスタンスの作成 {#creating-a-new-instance}

複数の海外ユーザーが同じインスタンスで作業できるようにするには、インスタンスの作成時にタイムゾーンを設定して、国家間のタイムラグを管理する必要があります。 インスタンスの作成時に、データベース設定ステージの「**[!UICONTROL タイムゾーン]**」セクションで日時管理モードを選択します。

**[!UICONTROL UTC データベース （タイムゾーンを含む日付フィールド）]** オプションをオンにして、日付と時刻を含むすべてのデータを UTC 形式（SQL フィールドと XML フィールド）で保存します。

![](assets/install_wz_select_utc_option.png)

>[!IMPORTANT]
>
>**サーバー** を使用している場合、Oracle クライアント レイヤーのタイム ゾーン ファイル （.dat）は、Oracleにインストールされているタイム ゾーン ファイルと互換性がある必要があります。

データベースが UTC でない場合、ドロップダウンリストに表示されるタイムゾーンの 1 つを選択できます。 サーバーのタイムゾーンを使用するか、UTC （協定世界時） オプションを選択することもできます。

![](assets/install_wz_unselect_utc_option.png)

**[!UICONTROL UTC データベース （タイムゾーンを含む日付フィールド）]** オプションを選択すると、SQL フィールドは TIMESTAMP WITH TIMEZONE 形式で保存されます。

それ以外の場合は、ローカル形式で保存され、データベースに適用するタイムゾーンを選択する必要があります。

### 移行 {#migration}

以前のバージョン（タイムゾーン管理なし）に移行する場合は、データベースで日付ストレージモードを定義する必要があります。

Adobe Campaign データベースにアクセスする外部ツールとの互換性を保証するために、**日付+時刻** 型の SQL フィールドは、デフォルトでローカル形式で保存されます。

日付を含む XML フィールドが UTC に保存されるようになりました。 読み込み時に、UTC 形式でないフィールドは、サーバーのタイムゾーンを使用して自動的に変換されます。 つまり、すべての XML フィールドは UTC 形式にプログレッシブに変換されます。

既存のインスタンスを使用するには、「**WdbcTimeZone**」オプションを追加し、インスタンスのタイムゾーンを入力します。

>[!IMPORTANT]
>
>WdbcTimeZone オプションに正しい値が設定されていることを確認してください。後で変更を加えると不整合が発生することがあります。

可能な値の例：

* ヨーロッパ / パリ
* ヨーロッパ / ロンドン
* アメリカ/ニューヨークなど

  これらの値は、tz （Olson） データベースから取得されます。 詳しくは、[https://en.wikipedia.org/wiki/List_of_tz_database_time_zones](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones) を参照してください。

## Oracleデータベースとサーバーのタイムゾーン

Campaign は、メインデータベースの場合、サーバーのタイムゾーンを使用して、データベース接続のセッションタイムゾーンを設定します。 「WdbcTimeZone」オプションは無効です。 したがって、サーバーのタイムゾーンは、Campaign で使用されるメインデータベースのタイムゾーンと一致する必要があります。 サーバータイムゾーンを変更できない場合、Campaign で使用されるタイムゾーンは、customer.sh の TZ 環境変数を設定することで上書きできます。