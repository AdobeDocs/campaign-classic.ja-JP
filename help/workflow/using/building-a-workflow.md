---
title: ワークフローの作成
seo-title: ワークフローの作成
description: ワークフローの作成
seo-description: null
page-status-flag: never-activated
uuid: 55743545-dd4b-4a0a-aeff-8fd638812b9d
contentOwner: sauviat
products: SG_CAMPAIGN/CLASSIC
audience: workflow
content-type: reference
topic-tags: -general-operation
discoiquuid: 2d4ccf81-cd85-4f4c-8ba8-5b5612af1e16
index: y
internal: n
snippet: y
translation-type: ht
source-git-commit: 1c86322fa95aee024f6c691b61a10c21a9a22eb7

---


# ワークフローの作成 {#building-a-workflow}

ここでは、Campaign での新しいワークフローの作成に関する主な原則とベストプラクティスについて説明します。

* ワークフローの作成（「[新規ワークフローの作成](#creating-a-new-workflow)」を参照）
* ワークフローダイアグラムのデザイン（「[アクティビティの追加とリンク](#adding-and-linking-activities)」を参照）
* アクティビティのパラメーターおよびプロパティへのアクセス（「[アクティビティの設定](#configuring-activities)」を参照）
* ターゲティングワークフローのデザイン（「[ターゲティングワークフロー](#targeting-workflows)」を参照）
* ワークフローを使用したキャンペーンの実施（「[キャンペーンワークフロー](#campaign-workflows)」を参照）
* テクニカルワークフローのアクセスと作成（「[テクニカルワークフロー](#technical-workflows)」を参照）
* テンプレートを使用したワークフローの作成（「[ワークフローテンプレート](#workflow-templates)」を参照）

## 新しいワークフローの作成 {#creating-a-new-workflow}

**[!UICONTROL エクスプローラー]**&#x200B;から、ワークフローフォルダーにアクセスします。デフォルトでは、**[!UICONTROL プロファイルとターゲット]**／**[!UICONTROL ジョブ]**／**[!UICONTROL ターゲティングワークフロー]**&#x200B;を使用できます。

ワークフローのリストの上にある「**[!UICONTROL 新規]**」ボタンをクリックします。

![](assets/create_a_wf_icon.png)

または、ワークフローの概要で「**[!UICONTROL 作成]**」ボタンを使用することもできます（**[!UICONTROL 監視]**／**[!UICONTROL ワークフロー]**&#x200B;リンク）。

![](assets/create_a_wf.png)

ラベルを入力して「**[!UICONTROL 保存]**」をクリックします。

>[!NOTE]
>
>ワークフローのアクティビティの内部名またはワークフロー自体の内部名を変更した場合は、変更した内部名が正しく反映されるように、ワークフローを閉じる前に必ず保存してください。

## アクティビティの追加とリンク {#adding-and-linking-activities}

ここでは、各種アクティビティを定義し、ダイアグラム内で互いにリンクする必要があります。設定のこの段階では、ダイアグラムラベルとワークフローステータスを確認できます（編集中）。ウィンドウの下部セクションは、ダイアグラムの編集のみに使用されます。この領域には、ツールバー、アクティビティのパレット（左側）、ダイアグラム自体（右側）があります。

![](assets/new-workflow-2.png)

>[!NOTE]
>
>パレットが表示されない場合、ツールバーの 1 番目のボタンをクリックして、パレットを表示します。

アクティビティは、パレットのタブごとに、カテゴリ別にグループ分けされます。利用できるタブおよびアクティビティは、ワークフロータイプに応じて異なります（テクニカルワークフロー、ターゲティングワークフロー、キャンペーンワークフロー）。

* 1 番目のタブには、ターゲティングアクティビティとデータ操作アクティビティが含まれています。これらのアクティビティについて詳しくは、[ターゲティングアクティビティ](../../workflow/using/about-targeting-activities.md)で説明しています。
* 2 番目のタブには、主に、その他のアクティビティの調整に使用されるスケジューリングアクティビティが含まれます。これらのアクティビティについては詳しくは、[フロー制御アクティビティ](../../workflow/using/about-flow-control-activities.md)で説明しています。
* 3 番目のタブには、ワークフロー内で使用できるツールとアクションが含まれています。これらのアクティビティについて詳しくは、[アクションアクティビティ](../../workflow/using/about-action-activities.md)で説明しています。
* 4 番目のタブには、メールの受信や、サーバーへのファイルの到着など、所定のイベントに基づくアクティビティが含まれています。これらのアクティビティについて詳しくは、[イベントアクティビティ](../../workflow/using/about-event-activities.md)で説明しています。

ダイアグラムを作成するには

1. パレット内でアクティビティを選択し、ドラッグ＆ドロップ操作を使用してダイアグラムに移動することで、アクティビティを追加します。

   ダイアグラムに「**開始**」アクティビティを追加し、次に「**配信**」アクティビティを追加します。

   ![](assets/new-workflow-3.png)

1. 「**開始**」アクティビティトランジションをドラッグして「**配信**」アクティビティにドロップし、2 つのアクティビティをリンクさせます。

   ![](assets/new-workflow-4.png)

   トランジションの最後に新しいアクティビティを配置することで、直前のアクティビティと自動的にリンクできます。

1. 必要なアクティビティを追加し、次の図に示すように、互いにリンクさせます。

   ![](assets/new-workflow-5.png)

>[!CAUTION]
>
>同じワークフロー内でアクティビティをコピーして貼り付けることができます。ただし、異なるワークフロー間でアクティビティをコピーして貼り付けることはお勧めしません。アクティビティに関連付けられた配信やスケジューラーなどの設定が、貼り付け先ワークフローの実行中に競合やエラーの原因となる可能性があります。代わりに、ワークフローを&#x200B;**複製**&#x200B;することをお勧めします。詳しくは、[ワークフローの複製](#duplicating-workflows)を参照してください。

### 追加のレイアウトオプション {#additional-layout-options}

以下の要素を使用して、グラフの表示とレイアウトを変更できます。

* **ツールバーの使用**

   ダイアグラムの編集ツールバーを使用して、レイアウトにアクセスし、ワークフローの関数を実行します。

   ![](assets/s_user_segmentation_wizard_10.png)

   これにより、パレットと概要の表示や、ダイアグラムのオブジェクトの配置やサイズなど、編集ツールのレイアウトを適用できます。

   ![](assets/s_user_segmentation_toolbar.png)

   詳細なターゲティングワークフローのトラッキングおよび開始に関連するアイコンについて詳しくは、この[節](../../campaign/using/marketing-campaign-deliveries.md#creating-a-targeting-workflow)を参照してください。

* **オブジェクトの整列**

   アイコンを整列させるには、アイコンを選択して&#x200B;**[!UICONTROL 縦に整列]**&#x200B;アイコンまたは&#x200B;**[!UICONTROL 横に整列]**&#x200B;アイコンをクリックします。

   連続していないアクティビティを選択したり、1 つまたは複数アクティビティの選択を解除するには、**Ctrl** キーを同時に押します。すべての選択を解除するには、ダイアグラムの背景をクリックします。

* **画像の管理**

   ダイアグラムの背景画像や、各種アクティビティを表す画像をカスタマイズできます。[アクティビティ画像の管理](../../workflow/using/managing-activity-images.md)を参照してください。

## アクティビティの設定 {#configuring-activities}

アクティビティを設定するには、ダブルクリックして開くか、右クリックして「**[!UICONTROL 開く]**」を選択します。

>[!NOTE]
>
>Campaign ワークフローアクティビティについて詳しくは、[この節](../../workflow/using/about-activities.md)を参照してください。

1 番目のタブには、基本設定が含まれます。「**[!UICONTROL 詳細設定]**」タブには、エラー発生時の動作の定義や、アクティビティの実行時間の指定、初期化スクリプトの入力に使用される追加のパラメータが含まれています。

アクティビティへの理解を深め、ワークフローの読みやすさを改善するには、アクティビティにコメントを入力します。入力したコメントは、オペレーターがアクティビティの上にマウスを置くと表示されます。

![](assets/example1-comment.png)

## ターゲティングワークフロー {#targeting-workflows}

ターゲティングワークフローにより、配信ターゲットをいくつか作成できます。ワークフローアクティビティを使用して、クエリを作成し、指定した条件に基づく和集合または除外を定義して、スケジューリングを追加することができます。このターゲティングの結果は、配信アクションのターゲットとして機能するリストに自動転送できます。

これらのアクティビティに加えて、データ管理の各種オプションを使用することで、データを操作して、高度な機能にアクセスし、複雑なターゲティングの問題を解決できます。詳しくは、[データ管理](../../workflow/using/targeting-data.md#data-management)を参照してください。

これらのアクティビティはすべて、1 番目のワークフロータブにあります。

>[!NOTE]
>
>ターゲティングアクティビティについて詳しくは、この[節](../../workflow/using/about-activities.md)を参照してください。

ターゲティングワークフローは、Adobe Campaign ツリーの&#x200B;**[!UICONTROL プロファイルとターゲット／ジョブ／ターゲティングワークフロー]**&#x200B;ノード経由、または&#x200B;**[!UICONTROL プロファイルとターゲット／ターゲティングワークフロー]**&#x200B;メニューから作成し、編集できます。

![](assets/target_wf.png)

キャンペーンのフレームワーク内のターゲティングワークフローは、すべてのキャンペーンワークフローとともに保存されます。

### 実装の手順 {#implementation-steps-}

ターゲティングデータの作成ステージの手順は、次のとおりです。

1. データベース内のデータの識別については、[クエリの作成](../../workflow/using/targeting-data.md#creating-queries)を参照してください。
1. 配信のニーズを満たすデータを準備する方法について詳しくはは、[データのエンリッチメントと変更](../../workflow/using/targeting-data.md#enriching-and-modifying-data)を参照してください。
1. 更新を実行するためのデータ使用、または配信内でのデータ使用について詳しくは、[データベースの更新](../../workflow/using/how-to-use-workflow-data.md#updating-the-database)を参照してください。

ターゲティング中に実行されたすべてのエンリッチメントと処理の結果はパーソナライゼーションフィールドに保存され、このフィールド経由でアクセスされます。具体的には、特にパーソナライズしたメッセージの作成などに使用されます。詳しくは、[ターゲットデータ](../../workflow/using/executing-a-workflow.md#target-data)を参照してください。

### ターゲティングとフィルタリングディメンション {#targeting-and-filtering-dimensions}

データのセグメント化操作では、ターゲティングキーは、フィルタリングディメンションとマッピングされます。ターゲティングディメンションは、受信者、契約の受益者、オペレーター、購読者など、ターゲットされる母集団を操作ごとに定義します。フィルタリングディメンションを使用して契約の所有者、ニュースレターの購読者など、特定の条件に基いて母集団を選択できます。

例えば、5 年以上生命保険の契約を持つ顧客を選択するには、ターゲティングディメンションで&#x200B;**クライアント**&#x200B;を選択し、フィルタリングディメンションで「**契約保持者**」を選択します。次に、クエリアクティビティ内でフィルタリング条件を定義します。

ターゲティングディメンションの選択ステージでは、互換性のあるフィルタリングディメンションだけがインターフェイスに表示されます。

これらの 2 つのディメンションは、関連付けられている必要があります。つまり、「**[!UICONTROL フィルタリングディメンション]**」リストの内容は、リストフィールド内に指定されたターゲティングディメンションにより異なります。

例えば、受信者の場合（「**受信者**」）、次のフィルタリングディメンションが使用可能になります。

![](assets/query_filter_target_dimensions_1.png)

「**Web アプリケーション**」の場合、リストには次のフィルタリングディメンションが表示されます。

![](assets/query_filter_target_dimensions_2.png)

## キャンペーンワークフロー {#campaign-workflows}

キャンペーンごとに、「**[!UICONTROL ターゲティングとワークフロー]**」タブから実行されるワークフローを作成できます。これらのワークフローは、各キャンペーンに固有です。

![](assets/wf-in-op-edit-delivery-tab.png)

このタブには、すべてのワークフロー用のものと同じアクティビティが含まれます。詳しくは、[実装の手順](#implementation-steps-)の節を参照してください。

ターゲティングキャンペーンに加えて、キャンペーンワークフローにより、すべての使用可能なチャネル用の配信全体を作成して設定できます。ワークフローで作成されたこれらの配信は、キャンペーンのダッシュボードから使用できます。

すべてのキャンペーンワークフローは、**[!UICONTROL 管理／プロダクション／自動作成されたオブジェクト／キャンペーンワークフロー]**&#x200B;ノードの下に集中管理されます。

![](assets/campaigns_wf.png)

キャンペーンワークフローおよび実装例について詳しくは、この[ページ](../../campaign/using/marketing-campaign-deliveries.md#building-the-main-target-in-a-workflow)を参照してください。

## テクニカルワークフロー {#technical-workflows}

テクニカルワークフローは、Adobe Campaign に付属し、そのまま使用できる形で提供されます。テクニカルワークフローとは、サーバー上で定期的に実行するようにスケジュールされた操作またはジョブです。テクニカルワークフローを使用して、データベースのメンテナンスを実施したり、配信に関するトラッキング情報を転送したり、配信に対する暫定的なプロセスを設定することができます。テクニカルワークフローは、**[!UICONTROL 管理／プロダクション／テクニカルワークフロー]**&#x200B;ノード経由で設定できます。

![](assets/navtree.png)

テクニカルワークフローの作成には、ネイティブテンプレートを使用可能です。ニーズに合わせてテンプレートをカスタマイズすることもできます。

タスク通知や在庫管理、コスト計算といった、キャンペーンでのプロセスの実行に必要なワークフローは、**[!UICONTROL キャンペーンプロセス]**&#x200B;サブフォルダーで集中管理されます。

>[!NOTE]
>
>各モジュールにインストールされているテクニカルワークフローのリストは、[専用のセクション](../../workflow/using/about-technical-workflows.md)から使用できます。

その他のテクニカルワークフローは、ツリー構造の&#x200B;**[!UICONTROL 管理／プロダクション／テクニカルワークフロー]**&#x200B;ノードで作成できます。ただし、このプロセスを実行できるのは、エキスパートユーザーに限られます。

提供されるアクティビティは、ターゲティングワークフローで提供されるものと同じです。詳しくは、[実装の手順](#implementation-steps-)を参照してください。

## ワークフローテンプレート {#workflow-templates}

ワークフローテンプレートには、プロパティ全体の設定が含まれます。ダイアグラム内に連結されているアクティビティの範囲が含まれることもあります。この設定は、設定済み要素を一定数含む新規ワークフローを作成する場合に再利用できます。

既存のテンプレートに基づいて新規ワークフローテンプレートを作成したり、ワークフローをテンプレートに直接変換することができます。

ワークフローテンプレートは、Adobe Campaign ツリーの&#x200B;**[!UICONTROL リソース／テンプレート／ワークフローテンプレート]**&#x200B;ノードに保存されます。

![](assets/s_advuser_wf_template_tree.png)

通常のワークフローのプロパティに加えて、テンプレートのプロパティには、このテンプレートに基づいて作成されたワークフローの実行ファイルを指定できます。

![](assets/s_advuser_wf_template_properties.png)

## ワークフローの複製 {#duplicating-workflows}

様々なタイプのワークフローを複製できます。複製後は、ワークフローの変更は複製されたワークフローには引き継がれません。

>[!CAUTION]
>
>コピー＆ペーストはワークフローで使用できますが、「**複製**」を使用することを推奨します。アクティビティがコピーされると、その設定全体が保持されます。配信アクティビティ（E メール、SMS、プッシュ通知など）の場合は、アクティビティに添付された配信オブジェクトもコピーされ、クラッシュの原因となる可能性があります。

1. ワークフローを右クリックします。
1. 「**複製**」をクリックします。

   ![](assets/duplicate-workflows.png)

1. ワークフローウィンドウで、ワークフローのラベルを変更します。
1. 「**保存**」をクリックします。

複製の機能は、キャンペーンのビューでは直接利用できません。

ただし、インスタンス上のすべてのワークフローを表示するビューの作成は可能です。このビューでは、**別の場所へ複製**&#x200B;を使用してワークフローを複製できます。

**まず、ビューを作成します。**

1. **エクスプローラー**&#x200B;で、ビューを作成するフォルダーに移動します。
1. 右クリックし、**新しいフォルダーを追加**／**プロセス**&#x200B;に移動し、**ワークフロー**&#x200B;を選択します。

   ![](assets/add-new-folder-workflows.png)

新規フォルダー「**ワークフロー**」が作成されます。

1. 右クリックして、**プロパティ**&#x200B;を選択します。
1. 「**制限**」で「**フォルダーのビュー化**」をチェックし、「**保存**」をクリックします。

   ![](assets/folder-is-a-view.png)

これで、フォルダーにインスタンスのすべてのワークフローが追加されました。

**キャンペーンワークフローの複製**

1. ワークフロービューでキャンペーンワークフローを選択します。
1. 右クリックして&#x200B;**別の場所へ複製**を選択します。
   ![](assets/duplicate-to-right-click.png)
1. ラベルを変更します。
1. 「**保存**」をクリックします。

複製したワークフローは、ワークフロービューで確認できます。
