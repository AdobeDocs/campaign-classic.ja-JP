---
title: 重複排除 - 重複アクティビティの結合機能の使用
description: 重複排除 - 重複アクティビティの結合機能の使い方を説明します。
page-status-flag: never-activated
uuid: 8887574e-447b-48a5-afc6-95783ffa7fb3
contentOwner: sauviat
products: SG_CAMPAIGN/CLASSIC
audience: workflow
content-type: reference
topic-tags: use-cases
discoiquuid: 4113c3fe-a279-4fe1-be89-ea43c96edc34
index: y
internal: n
snippet: y
translation-type: tm+mt
source-git-commit: 32a14eb99847dc04a582623204bc856c29fa4359
workflow-type: tm+mt
source-wordcount: '570'
ht-degree: 9%

---


# 重複排除 - 重複アクティビティの結合機能の使用{#deduplication-merge}

## この使用例について{#about-this-use-case}

この使用例では、**[!UICONTROL 重複排除 - 重複]**&#x200B;アクティビティで&#x200B;**[!UICONTROL Merge]**&#x200B;機能を使用する方法を説明します。

この機能の詳細については、[この](../../workflow/using/deduplication.md#merging-fields-into-single-record)セクションを参照してください。

**[!UICONTROL 重複排除 - 重複]**&#x200B;アクティビティは、データセットから重複行を削除するために使用します。 この使用例では、次のデータが電子メールフィールドに基づいて複製されます。

| 最終変更日 | 名 | 姓 | 電子メール | 携帯電話 | 電話 |
|-----|------------|-----------|-------|--------------|------|
| 2020年5月19日 | ロバート | ティズナー | bob@mycompany.com | 444-444-444 | 777-777-7777 |
| 2020年7月22日 | ボビー | ティズナー | bob@mycompany.com |  | 777-777-7777 |
| 10/03/2020 | ボブ |  | bob@mycompany.com |  | 888-888-8888 |

重複排除 - 重複アクティビティの&#x200B;**[!UICONTROL 結合]**&#x200B;機能を使用して、重複排除 - 重複の一連のルールを設定し、単一の結果データレコードに結合するフィールドのグループを定義できます。 例えば、一連の重複レコードでは、最も古い電話番号または最新の名前を保持するように選択できます。

## 結合機能のアクティブ化{#activating-merge}


結合機能を有効にするには、まず&#x200B;**[!UICONTROL 重複排除 - 重複]**&#x200B;アクティビティを設定する必要があります。 それには、次の手順に従います。

1. アクティビティを開き、「**[設定を編集]**」リンクをクリックします。

1. 重複排除 - 重複に使用する調整フィールドを選択し、「**[!UICONTROL 次へ]**」をクリックします。 この例では、電子メールフィールドに基づいて重複除外を行います。

   ![](assets/uc_merge_edit.png)

1. 「**[!UICONTROL 高度なパラメーター]**」リンクをクリックし、「**[!UICONTROL レコードの結合]**」および「**[!UICONTROL 複数のレコード結合条件]**&#x200B;を使用」オプションをアクティブにします。

   ![](assets/uc_merge_advanced_parameters.png)

1. **[!UICONTROL Merge]**&#x200B;タブが&#x200B;**[!UICONTROL 重複排除 - 重複]**&#x200B;設定画面に追加されます。 このタブを使用して、重複排除 - 重複の実行時にマージするデータを指定します。

## 結合するフィールドの設定{#configuring-rules}

データを単一のレコードに結合する際に使用するルールを次に示します。

* 最新の名前（名と姓の各フィールド）を保持し、
* 最新の携帯電話を保持する、
* 最も古い電話番号を保持します。
* 最終レコードに適格なグループ内のすべてのフィールドは、null以外である必要があります。

これらのルールを設定するには、次の手順に従います。

1. 「**[!UICONTROL 結合]**」タブを開き、「**[!UICONTROL 追加]**」ボタンをクリックします。

   ![](assets/uc_merge_add.png)

1. 結合するフィールドのグループの識別子とラベルを指定します。

   ![](assets/uc_merge_identifier.png)

1. 考慮するレコードを選択する条件を指定します。

   ![](assets/uc_merge_filter.png)

1. 最新の名前を選択するために、最終変更日に並べ替えます。

   ![](assets/uc_merge_sort.png)

1. 結合するフィールドを選択します。 この例では、姓と名のフィールドを保持します。

   ![](assets/uc_merge_keep.png)

1. 結合するデータのセットにフィールドが追加され、新しい要素がワークフロースキーマに追加されます。

   以下の手順を繰り返して、携帯電話および電話のフィールドを設定します。

   ![](assets/dedup8.png)

   ![](assets/dedup9.png)

## 結果 {#results}

これらのルールを設定した後、**[!UICONTROL 重複排除 - 重複]**&#x200B;アクティビティの最後に次のデータを受け取ります。

| 変更日 | 名 | 姓 | 電子メール | 携帯電話 | 電話 |
-----|------------|-----------|-------|--------------|------|
| 2020年5月19日 | ロバート | ティズナー | bob@mycompany.com | 444-444-444 | 777-777-7777 |
| 2020年7月22日 | ボビー | ティズナー | bob@mycompany.com |  | 777-777-7777 |
| 10/03/2020 | ボブ |  | bob@mycompany.com |  | 888-888-8888 |

前述のルールに従って、3つのレコードから結果がマージされます。 比較後、最新の名称と携帯電話が、元の電話番号と共に使用されていると結論付けられます。

| 名 | 姓 | 電子メール | 携帯電話 | 電話 |
|------------|-----------|-------|--------------|------|
| ボビー | ティズナー | bob@mycompany.com | 444-444-4444 | 888-888-8888 |

>[!NOTE]
>
> 結合された名は「ボビー」です。これは、名と姓の両方のフィールドで構成される「名前」ルールを設定したからです。
>
>その結果、「Bob」（最新の名）は、関連付けられた姓のフィールドが空であるため、考慮に入れられませんでした。 姓と名の最新の組み合わせが最終レコードに結合されました。
